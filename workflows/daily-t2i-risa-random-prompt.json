{
  "name": "Daily T2I Risa - ãƒ©ãƒ³ãƒ€ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ç”»åƒç”Ÿæˆ",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 21 * * *"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -3000,
        380
      ],
      "id": "schedule-trigger-21",
      "name": "æ¯æ—¥21:00ã«å®Ÿè¡Œ"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -3000,
        180
      ],
      "id": "manual-trigger",
      "name": "æ‰‹å‹•å®Ÿè¡Œç”¨",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appT0xl5FQXJkGXJA",
          "mode": "list",
          "cachedResultName": "instagrammer-risa",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA"
        },
        "table": {
          "__rl": true,
          "value": "tbl82LazWZ1dO2kN2",
          "mode": "list",
          "cachedResultName": "i2v_prompts",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA/tbl82LazWZ1dO2kN2"
        },
        "filterByFormula": "AND({is_active} = TRUE(), OR({category} = 't2i', {category} = 'both', {category} = ''))",
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -2700,
        380
      ],
      "id": "get-all-prompts",
      "name": "T2Iå¯¾å¿œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—",
      "credentials": {
        "airtableTokenApi": {
          "id": "zck4Yxxo2C5leQFC",
          "name": "Airtable sns workspace PAT"
        }
      }
    },
    {
      "parameters": {
        "mode": "randomItem",
        "randomItemsNumber": 1
      },
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3.1,
      "position": [
        -2500,
        380
      ],
      "id": "select-random-prompt",
      "name": "ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤é¸æŠ"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "prompt_text",
              "name": "prompt_text",
              "value": "={{ $json.prompt_en }}",
              "type": "string"
            },
            {
              "id": "prompt_title",
              "name": "prompt_title",
              "value": "={{ $json.title }}",
              "type": "string"
            },
            {
              "id": "prompt_ja",
              "name": "prompt_ja",
              "value": "={{ $json.prompt_ja }}",
              "type": "string"
            },
            {
              "id": "prompt_id",
              "name": "prompt_id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "t2i_prompt",
              "name": "t2i_prompt",
              "value": "={{ $json.prompt_en + ', high quality image, 4K resolution, professional photography, detailed, sharp focus' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2300,
        380
      ],
      "id": "set-prompt-data",
      "name": "T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.example.com/generate-image",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer YOUR_T2I_API_KEY"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "prompt",
              "value": "={{ $json.t2i_prompt }}"
            },
            {
              "name": "model",
              "value": "stable-diffusion-xl"
            },
            {
              "name": "width",
              "value": "1080"
            },
            {
              "name": "height",
              "value": "1920"
            },
            {
              "name": "aspect_ratio",
              "value": "9:16"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2100,
        380
      ],
      "id": "generate-image",
      "name": "ç”»åƒã‚’ç”Ÿæˆ"
    },
    {
      "parameters": {
        "mode": "wait",
        "value": 10000
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -1950,
        380
      ],
      "id": "wait-for-generation",
      "name": "ç”Ÿæˆå¾…æ©Ÿï¼ˆ10ç§’ï¼‰"
    },
    {
      "parameters": {
        "method": "GET",
        "url": "={{ $('ç”»åƒã‚’ç”Ÿæˆ').item.json.status_url }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer YOUR_T2I_API_KEY"
            }
          ]
        },
        "options": {
          "timeout": 60000
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1800,
        380
      ],
      "id": "check-image-status",
      "name": "ç”»åƒç”Ÿæˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª"
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "appT0xl5FQXJkGXJA",
          "mode": "list",
          "cachedResultName": "instagrammer-risa",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA"
        },
        "table": {
          "__rl": true,
          "value": "tblKFdtjRr11K2Wj9",
          "mode": "list",
          "cachedResultName": "posts",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA/tblKFdtjRr11K2Wj9"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "caption": "={{ $('T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_ja + '\\n\\nğŸ¨ AIç”»åƒç”Ÿæˆ\\n\\n#AIArt #T2I #æ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ #' + $('T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_title.replace(/ /g, '') + ' #ç”»åƒç”ŸæˆAI' }}",
            "status": "scheduled",
            "post_date": "={{ $now.plus({hours: 1}) }}",
            "account": ["recX7SczgRslsMUvx"],
            "content_type": "single_image",
            "image_url": "={{ $json.image_url }}"
          }
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -1600,
        380
      ],
      "id": "create-post-record",
      "name": "æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ",
      "credentials": {
        "airtableTokenApi": {
          "id": "zck4Yxxo2C5leQFC",
          "name": "Airtable sns workspace PAT"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appT0xl5FQXJkGXJA",
          "mode": "list",
          "cachedResultName": "instagrammer-risa",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA"
        },
        "table": {
          "__rl": true,
          "value": "tbl82LazWZ1dO2kN2",
          "mode": "list",
          "cachedResultName": "i2v_prompts",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA/tbl82LazWZ1dO2kN2"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_id }}",
            "t2i_usage_count": "={{ ($json.t2i_usage_count || 0) + 1 }}",
            "last_t2i_used": "={{ $now }}"
          },
          "matchingColumns": [
            "id"
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -1400,
        380
      ],
      "id": "update-prompt-usage",
      "name": "T2Iä½¿ç”¨å›æ•°ã‚’æ›´æ–°",
      "credentials": {
        "airtableTokenApi": {
          "id": "zck4Yxxo2C5leQFC",
          "name": "Airtable sns workspace PAT"
        }
      }
    },
    {
      "parameters": {
        "authentication": "webhook",
        "content": "=ğŸ¨ T2Iãƒ©ãƒ³ãƒ€ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ç”»åƒç”Ÿæˆã‚’é–‹å§‹ã—ã¾ã—ãŸï¼\n\nğŸ“ é¸æŠã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:\n**{{ $('T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_title }}**\n\nğŸŒ è‹±èªï¼ˆT2Iç”¨ï¼‰:\n```\n{{ $('T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.t2i_prompt }}\n```\n\nğŸ‡¯ğŸ‡µ æ—¥æœ¬èª:\n```\n{{ $('T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_ja }}\n```\n\nâ° å®Ÿè¡Œæ™‚åˆ»: {{ $now.format('YYYYå¹´MMæœˆDDæ—¥ HH:mm') }}",
        "options": {},
        "embeds": {
          "values": [
            {
              "color": "#FF00FF",
              "title": "T2Iç”»åƒç”Ÿæˆé–‹å§‹",
              "footer": "instagrammer-risa T2I"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        -1200,
        380
      ],
      "id": "discord-generation-start",
      "name": "Discordé€šçŸ¥ï¼ˆT2Iç”Ÿæˆé–‹å§‹ï¼‰",
      "webhookId": "1394317186608271400/jb9d34RO3PLZ6kjWwP4puKKNaxEJ_ZhXprVfkAboml-elf5r770Ocu9Bv_DvU87QqBYc",
      "credentials": {
        "discordWebhookApi": {
          "id": "new-discord-webhook",
          "name": "Discord Webhook Risa"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "image_url",
              "name": "image_url",
              "value": "={{ $('ç”»åƒç”Ÿæˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª').item.json.image_url }}",
              "type": "string"
            },
            {
              "id": "post_id",
              "name": "post_id",
              "value": "={{ $('æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ').item.json.id }}",
              "type": "string"
            },
            {
              "id": "generation_time",
              "name": "generation_time",
              "value": "={{ $('ç”»åƒç”Ÿæˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª').item.json.generation_time_seconds }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1000,
        380
      ],
      "id": "set-image-data",
      "name": "ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š"
    },
    {
      "parameters": {
        "operation": "downloadFile",
        "url": "={{ $json.image_url }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file",
              "outputPropertyName": "image_file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -800,
        380
      ],
      "id": "download-image",
      "name": "ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"
    },
    {
      "parameters": {
        "operation": "upload",
        "binaryPropertyName": "image_file",
        "base": {
          "__rl": true,
          "value": "appT0xl5FQXJkGXJA",
          "mode": "list",
          "cachedResultName": "instagrammer-risa",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA"
        },
        "table": {
          "__rl": true,
          "value": "tblKFdtjRr11K2Wj9",
          "mode": "list",
          "cachedResultName": "posts",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA/tblKFdtjRr11K2Wj9"
        },
        "id": "={{ $('ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.post_id }}",
        "fieldName": "media",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -600,
        380
      ],
      "id": "upload-to-airtable",
      "name": "Airtableã«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",
      "credentials": {
        "airtableTokenApi": {
          "id": "zck4Yxxo2C5leQFC",
          "name": "Airtable sns workspace PAT"
        }
      }
    },
    {
      "parameters": {
        "authentication": "webhook",
        "content": "=âœ… T2Iç”»åƒç”Ÿæˆã¨æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå®Œäº†ã—ã¾ã—ãŸï¼\n\nğŸ“… æŠ•ç¨¿äºˆå®šæ™‚åˆ»: {{ $('æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ').item.json.post_date.format('YYYYå¹´MMæœˆDDæ—¥ HH:mm') }}\n\nğŸ¨ ä½¿ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: {{ $('T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_title }}\n\nâ±ï¸ ç”Ÿæˆæ™‚é–“: {{ $('ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.generation_time }}ç§’\n\nâ° å®Œäº†æ™‚åˆ»: {{ $now.format('YYYYå¹´MMæœˆDDæ—¥ HH:mm') }}",
        "options": {},
        "embeds": {
          "values": [
            {
              "color": "#00FF00",
              "title": "T2IæŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œäº†",
              "fields": [
                {
                  "name": "ç”»åƒã‚µã‚¤ã‚º",
                  "value": "1080x1920",
                  "inline": true
                },
                {
                  "name": "ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”",
                  "value": "9:16 (ç¸¦å‹)",
                  "inline": true
                }
              ],
              "footer": "instagrammer-risa T2I"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        -400,
        380
      ],
      "id": "discord-schedule-success",
      "name": "Discordé€šçŸ¥ï¼ˆT2Iã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œäº†ï¼‰",
      "webhookId": "1394317186608271400/jb9d34RO3PLZ6kjWwP4puKKNaxEJ_ZhXprVfkAboml-elf5r770Ocu9Bv_DvU87QqBYc",
      "credentials": {
        "discordWebhookApi": {
          "id": "new-discord-webhook",
          "name": "Discord Webhook Risa"
        }
      }
    },
    {
      "parameters": {
        "authentication": "webhook",
        "content": "=âŒ T2Iç”Ÿæˆã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ\n\nğŸ’¡ ã‚¨ãƒ©ãƒ¼å†…å®¹:\n```\n{{ $json.error.message || 'Unknown error' }}\n```\n\nğŸ“ ä½¿ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: {{ $('T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_title || 'N/A' }}\n\nâ° ç™ºç”Ÿæ™‚åˆ»: {{ $now.format('YYYYå¹´MMæœˆDDæ—¥ HH:mm') }}",
        "options": {},
        "embeds": {
          "values": [
            {
              "color": "#FF0000",
              "title": "T2Iã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ",
              "footer": "instagrammer-risa T2I"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        -400,
        580
      ],
      "id": "discord-error",
      "name": "Discordé€šçŸ¥ï¼ˆT2Iã‚¨ãƒ©ãƒ¼ï¼‰",
      "webhookId": "1394317186608271400/jb9d34RO3PLZ6kjWwP4puKKNaxEJ_ZhXprVfkAboml-elf5r770Ocu9Bv_DvU87QqBYc",
      "credentials": {
        "discordWebhookApi": {
          "id": "new-discord-webhook",
          "name": "Discord Webhook Risa"
        }
      }
    }
  ],
  "connections": {
    "æ¯æ—¥21:00ã«å®Ÿè¡Œ": {
      "main": [
        [
          {
            "node": "T2Iå¯¾å¿œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ‰‹å‹•å®Ÿè¡Œç”¨": {
      "main": [
        [
          {
            "node": "T2Iå¯¾å¿œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "T2Iå¯¾å¿œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—": {
      "main": [
        [
          {
            "node": "ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤é¸æŠ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤é¸æŠ": {
      "main": [
        [
          {
            "node": "T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "T2Iãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š": {
      "main": [
        [
          {
            "node": "ç”»åƒã‚’ç”Ÿæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”»åƒã‚’ç”Ÿæˆ": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆå¾…æ©Ÿï¼ˆ10ç§’ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆå¾…æ©Ÿï¼ˆ10ç§’ï¼‰": {
      "main": [
        [
          {
            "node": "ç”»åƒç”Ÿæˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”»åƒç”Ÿæˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª": {
      "main": [
        [
          {
            "node": "æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ": {
      "main": [
        [
          {
            "node": "T2Iä½¿ç”¨å›æ•°ã‚’æ›´æ–°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "T2Iä½¿ç”¨å›æ•°ã‚’æ›´æ–°": {
      "main": [
        [
          {
            "node": "Discordé€šçŸ¥ï¼ˆT2Iç”Ÿæˆé–‹å§‹ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Discordé€šçŸ¥ï¼ˆT2Iç”Ÿæˆé–‹å§‹ï¼‰": {
      "main": [
        [
          {
            "node": "ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š": {
      "main": [
        [
          {
            "node": "ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰": {
      "main": [
        [
          {
            "node": "Airtableã«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtableã«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰": {
      "main": [
        [
          {
            "node": "Discordé€šçŸ¥ï¼ˆT2Iã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œäº†ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "errorWorkflow": "discord-error"
  },
  "versionId": "1.0.0",
  "meta": {
    "templateCredsSetupCompleted": false,
    "instanceId": ""
  },
  "tags": ["t2i", "image-generation", "automated"]
}