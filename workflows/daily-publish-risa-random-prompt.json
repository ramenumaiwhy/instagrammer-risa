{
  "name": "Daily Publish Risa - ãƒ©ãƒ³ãƒ€ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæŠ•ç¨¿",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 20 * * *"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -3000,
        380
      ],
      "id": "schedule-trigger-20",
      "name": "æ¯æ—¥20:00ã«å®Ÿè¡Œ"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -3000,
        180
      ],
      "id": "manual-trigger",
      "name": "æ‰‹å‹•å®Ÿè¡Œç”¨",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appT0xl5FQXJkGXJA",
          "mode": "list",
          "cachedResultName": "instagrammer-risa",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA"
        },
        "table": {
          "__rl": true,
          "value": "tbl82LazWZ1dO2kN2",
          "mode": "list",
          "cachedResultName": "i2v_prompts",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA/tbl82LazWZ1dO2kN2"
        },
        "filterByFormula": "{is_active} = TRUE()",
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -2700,
        380
      ],
      "id": "get-all-prompts",
      "name": "å…¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—",
      "credentials": {
        "airtableTokenApi": {
          "id": "zck4Yxxo2C5leQFC",
          "name": "Airtable sns workspace PAT"
        }
      }
    },
    {
      "parameters": {
        "mode": "randomItem",
        "randomItemsNumber": 1
      },
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3.1,
      "position": [
        -2500,
        380
      ],
      "id": "select-random-prompt",
      "name": "ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤é¸æŠ"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "prompt_text",
              "name": "prompt_text",
              "value": "={{ $json.prompt_en }}",
              "type": "string"
            },
            {
              "id": "prompt_title",
              "name": "prompt_title",
              "value": "={{ $json.title }}",
              "type": "string"
            },
            {
              "id": "prompt_ja",
              "name": "prompt_ja",
              "value": "={{ $json.prompt_ja }}",
              "type": "string"
            },
            {
              "id": "prompt_id",
              "name": "prompt_id",
              "value": "={{ $json.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2300,
        380
      ],
      "id": "set-prompt-data",
      "name": "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.example.com/generate-image",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer YOUR_API_KEY"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "prompt",
              "value": "={{ $json.prompt_text }}"
            },
            {
              "name": "model",
              "value": "stable-diffusion-xl"
            },
            {
              "name": "width",
              "value": "1080"
            },
            {
              "name": "height",
              "value": "1080"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2100,
        380
      ],
      "id": "generate-image",
      "name": "ç”»åƒã‚’ç”Ÿæˆ"
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "appT0xl5FQXJkGXJA",
          "mode": "list",
          "cachedResultName": "instagrammer-risa",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA"
        },
        "table": {
          "__rl": true,
          "value": "tblKFdtjRr11K2Wj9",
          "mode": "list",
          "cachedResultName": "posts",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA/tblKFdtjRr11K2Wj9"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "caption": "={{ $('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_ja + '\\n\\n#AIã‚¢ãƒ¼ãƒˆ #æ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ #' + $('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_title.replace(/ /g, '') }}",
            "status": "scheduled",
            "post_date": "={{ $now.plus({minutes: 5}) }}",
            "account": ["recX7SczgRslsMUvx"],
            "content_type": "single_image"
          }
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -1900,
        380
      ],
      "id": "create-post-record",
      "name": "æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ",
      "credentials": {
        "airtableTokenApi": {
          "id": "zck4Yxxo2C5leQFC",
          "name": "Airtable sns workspace PAT"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appT0xl5FQXJkGXJA",
          "mode": "list",
          "cachedResultName": "instagrammer-risa",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA"
        },
        "table": {
          "__rl": true,
          "value": "tbl82LazWZ1dO2kN2",
          "mode": "list",
          "cachedResultName": "i2v_prompts",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA/tbl82LazWZ1dO2kN2"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_id }}",
            "usage_count": "={{ ($json.usage_count || 0) + 1 }}",
            "last_used": "={{ $now }}"
          },
          "matchingColumns": [
            "id"
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -1700,
        380
      ],
      "id": "update-prompt-usage",
      "name": "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½¿ç”¨å›æ•°ã‚’æ›´æ–°",
      "credentials": {
        "airtableTokenApi": {
          "id": "zck4Yxxo2C5leQFC",
          "name": "Airtable sns workspace PAT"
        }
      }
    },
    {
      "parameters": {
        "authentication": "webhook",
        "content": "=ğŸ² ãƒ©ãƒ³ãƒ€ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ç”»åƒç”Ÿæˆã‚’é–‹å§‹ã—ã¾ã—ãŸï¼\n\nğŸ“ é¸æŠã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:\n**{{ $('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_title }}**\n\nğŸŒ è‹±èª:\n```\n{{ $('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_text }}\n```\n\nğŸ‡¯ğŸ‡µ æ—¥æœ¬èª:\n```\n{{ $('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_ja }}\n```\n\nâ° å®Ÿè¡Œæ™‚åˆ»: {{ $now.format('YYYYå¹´MMæœˆDDæ—¥ HH:mm') }}",
        "options": {},
        "embeds": {
          "values": [
            {
              "color": "#00BFFF",
              "title": "ç”»åƒç”Ÿæˆé–‹å§‹",
              "footer": "instagrammer-risa"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        -1500,
        380
      ],
      "id": "discord-generation-start",
      "name": "Discordé€šçŸ¥ï¼ˆç”Ÿæˆé–‹å§‹ï¼‰",
      "webhookId": "1394317186608271400/jb9d34RO3PLZ6kjWwP4puKKNaxEJ_ZhXprVfkAboml-elf5r770Ocu9Bv_DvU87QqBYc",
      "credentials": {
        "discordWebhookApi": {
          "id": "new-discord-webhook",
          "name": "Discord Webhook Risa"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "media_url",
              "name": "media_url",
              "value": "={{ $json.image_url }}",
              "type": "string"
            },
            {
              "id": "post_id",
              "name": "post_id",
              "value": "={{ $('æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ').item.json.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1300,
        380
      ],
      "id": "set-media-data",
      "name": "ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š"
    },
    {
      "parameters": {
        "operation": "upload",
        "binaryPropertyName": "data",
        "base": {
          "__rl": true,
          "value": "appT0xl5FQXJkGXJA",
          "mode": "list",
          "cachedResultName": "instagrammer-risa",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA"
        },
        "table": {
          "__rl": true,
          "value": "tblAttachments",
          "mode": "list",
          "cachedResultName": "attachments",
          "cachedResultUrl": "https://airtable.com/appT0xl5FQXJkGXJA/tblAttachments"
        },
        "attachToRecordId": "={{ $json.post_id }}",
        "fieldName": "media",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -1100,
        380
      ],
      "id": "upload-to-airtable",
      "name": "Airtableã«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",
      "credentials": {
        "airtableTokenApi": {
          "id": "zck4Yxxo2C5leQFC",
          "name": "Airtable sns workspace PAT"
        }
      }
    },
    {
      "parameters": {
        "authentication": "webhook",
        "content": "=âœ… ç”»åƒç”Ÿæˆã¨æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå®Œäº†ã—ã¾ã—ãŸï¼\n\nğŸ“… æŠ•ç¨¿äºˆå®šæ™‚åˆ»: {{ $('æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ').item.json.post_date.format('YYYYå¹´MMæœˆDDæ—¥ HH:mm') }}\n\nğŸ¨ ä½¿ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: {{ $('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š').item.json.prompt_title }}\n\nâ° å®Œäº†æ™‚åˆ»: {{ $now.format('YYYYå¹´MMæœˆDDæ—¥ HH:mm') }}",
        "options": {},
        "embeds": {
          "values": [
            {
              "color": "#00FF00",
              "title": "æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œäº†",
              "footer": "instagrammer-risa"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        -900,
        380
      ],
      "id": "discord-schedule-success",
      "name": "Discordé€šçŸ¥ï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œäº†ï¼‰",
      "webhookId": "1394317186608271400/jb9d34RO3PLZ6kjWwP4puKKNaxEJ_ZhXprVfkAboml-elf5r770Ocu9Bv_DvU87QqBYc",
      "credentials": {
        "discordWebhookApi": {
          "id": "new-discord-webhook",
          "name": "Discord Webhook Risa"
        }
      }
    },
    {
      "parameters": {
        "authentication": "webhook",
        "content": "=âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ\n\nğŸ’¡ ã‚¨ãƒ©ãƒ¼å†…å®¹:\n```\n{{ $json.error.message || 'Unknown error' }}\n```\n\nâ° ç™ºç”Ÿæ™‚åˆ»: {{ $now.format('YYYYå¹´MMæœˆDDæ—¥ HH:mm') }}",
        "options": {},
        "embeds": {
          "values": [
            {
              "color": "#FF0000",
              "title": "ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ",
              "footer": "instagrammer-risa"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        -900,
        580
      ],
      "id": "discord-error",
      "name": "Discordé€šçŸ¥ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰",
      "webhookId": "1394317186608271400/jb9d34RO3PLZ6kjWwP4puKKNaxEJ_ZhXprVfkAboml-elf5r770Ocu9Bv_DvU87QqBYc",
      "credentials": {
        "discordWebhookApi": {
          "id": "new-discord-webhook",
          "name": "Discord Webhook Risa"
        }
      }
    }
  ],
  "connections": {
    "æ¯æ—¥20:00ã«å®Ÿè¡Œ": {
      "main": [
        [
          {
            "node": "å…¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ‰‹å‹•å®Ÿè¡Œç”¨": {
      "main": [
        [
          {
            "node": "å…¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å…¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—": {
      "main": [
        [
          {
            "node": "ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤é¸æŠ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤é¸æŠ": {
      "main": [
        [
          {
            "node": "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š": {
      "main": [
        [
          {
            "node": "ç”»åƒã‚’ç”Ÿæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”»åƒã‚’ç”Ÿæˆ": {
      "main": [
        [
          {
            "node": "æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æŠ•ç¨¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ": {
      "main": [
        [
          {
            "node": "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½¿ç”¨å›æ•°ã‚’æ›´æ–°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½¿ç”¨å›æ•°ã‚’æ›´æ–°": {
      "main": [
        [
          {
            "node": "Discordé€šçŸ¥ï¼ˆç”Ÿæˆé–‹å§‹ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Discordé€šçŸ¥ï¼ˆç”Ÿæˆé–‹å§‹ï¼‰": {
      "main": [
        [
          {
            "node": "ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š": {
      "main": [
        [
          {
            "node": "Airtableã«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtableã«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰": {
      "main": [
        [
          {
            "node": "Discordé€šçŸ¥ï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œäº†ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "1.0.0",
  "meta": {
    "templateCredsSetupCompleted": false,
    "instanceId": ""
  },
  "tags": []
}